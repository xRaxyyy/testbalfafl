<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Discounter Feuerwerk</title>
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-bold-rounded/css/uicons-bold-rounded.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-bold-straight/css/uicons-bold-straight.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-solid-rounded/css/uicons-solid-rounded.css">

    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/f6f6445ca5.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
    <script src="cart.js" defer></script>
    <script src="account.js" defer></script>
</head>

<body>

    <section id="navbar">
        <div id="logo">
            <img src="img/logo.png" alt="Website Logo">
        </div>
        <ul id="navbar-buttons">
            <li><a class="active" id="home-link" href="home.html">Home</a></li>
            <li class="dropdown">
                <a id="lidl-link" href="lidl.html">Lidl <i class="fi-sr-angle-small-down"></i></a>
                <ul class="dropdown-content">
                    <li><a href="lidl/cakes.html">Cakes</a></li>
                    <li><a href="lidl/fonteinen.html">Fonteinen</a></li>
                    <li><a href="lidl/vuurpijlen.html">Vuurpijlen</a></li>
                    <li><a href="lidl/knalvuurwerk.html">Knalvuurwerk</a></li>
                    <li><a href="lidl/pakketten.html">Pakketten</a></li>
                    <li><a href="lidl/singleshots.html">Single Shots</a></li>
                    <li><a href="lidl/overig.html">Overig</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a id="aldi-link" href="#">Aldi <i class="fi-sr-angle-small-down"></i></a>
                <ul class="dropdown-content">
                    <li><a href="aldi/cakes.html">Cakes</a></li>
                    <li><a href="aldi/fonteinen.html">Fonteinen</a></li>
                    <li><a href="aldi/vuurpijlen.html">Vuurpijlen</a></li>
                    <li><a href="aldi/knalvuurwerk.html">Knalvuurwerk</a></li>
                    <li><a href="aldi/pakketten.html">Pakketten</a></li>
                    <li><a href="aldi/singleshots.html">Single Shots</a></li>
                    <li><a href="aldi/overig.html">Overig</a></li>
                </ul>
            </li>
        </ul>
        <div id="other-buttons">
            <i id="search-link" onclick="toggleSearchOverlay()" class="fi-br-search"></i>
            <li id="profile-dropdown">
                <a id="account-link" href="account.html"><i class="fi-br-portrait"></i></a>
                <ul id="profile-content">
                    <li><p id="profile-username">test12341234</p></li>
                    <li><p id="logout" onclick="logout()">Logout <i class="fi-br-sign-out-alt"></i></p></li>
                </ul>
            </li>
            <a id="shopping-cart" href="cart.html">
                <i id="cart-link" class="fi-br-shopping-bag"></i>
                <h1 id="cart-counter">0</h1>
            </a>
        </div>        
    </section>

    <section id="search-overlay">
        <div id="search-bar">
            <div id="search-holder">
                <div id="search-box">
                    <i class="fi-br-search"></i>
                    <input id="search-input" type="text" placeholder="Zoekterm invoeren..">
                    <div id="search-icon">
                        <i class="fi-br-search"></i>
                    </div>
                </div>
                <div id="suggestions" class="suggestions-list">

                </div>
            </div>
        </div>
    </section>

    <section id="hero">
        <h2>Vuurwerk Duitsland</h2>
        <p>2024 / 2025</p>
        <div class="buttons">
            <a href="lidl.html" class="button">LIDL</a>
            <a href="aldi.html" class="button">ALDI</a>
        </div>        
    </section>

    <script>

        document.addEventListener("DOMContentLoaded", clearSearchInput);
        window.addEventListener("pageshow", (event) => {
            // Check if the page was loaded from the cache
            if (event.persisted) {
                clearSearchInput();
            }
        });
        
        function clearSearchInput() {
            const searchInput = document.getElementById('search-input');
            // Set the input value to an empty string to clear it
            searchInput.value = '';
        }
        
        
        
        
            function toggleSearchOverlay() {
                const overlay = document.getElementById('search-overlay');
                const searchBar = document.getElementById('search-bar');
            
                if (overlay.classList.contains('visible')) {
                    // Hide the overlay and search bar
                    searchBar.classList.remove('visible'); // Trigger slide-out and fade-out
                    overlay.classList.remove('visible'); // Hide the overlay
            
                    // Wait for the transition to finish before hiding the overlay
                    setTimeout(() => {
                        overlay.style.visibility = 'hidden'; // Hide the overlay
                        clearSearchInput();
                    }, 300); // Match this time with your CSS transition duration
                } else {
                    overlay.style.visibility = 'visible'; // Show the overlay
                    overlay.classList.add('visible'); // Trigger fade-in effect
                    searchBar.classList.add('visible'); // Trigger slide-in effect
                }
            }
            
            // Add event listener to the overlay to close it on click
            document.getElementById('search-overlay').addEventListener('click', function(event) {
                // Check if the overlay is visible
                if (this.classList.contains('visible')) {
                    toggleSearchOverlay(); // Close the overlay if it's open
                    setTimeout(() => {
                        clearSearchInput();
                    }, 300);
                }
            });
            
            // Stop event propagation for all children of the overlay
            const overlayChildren = document.querySelectorAll('#search-overlay *');
            overlayChildren.forEach(child => {
                child.addEventListener('click', function(event) {
                    event.stopPropagation(); // Prevent the overlay from closing
                });
            });
            </script>
            
        
        <script>
            let searchProducts = [];
            
            // Load products from products.json
            document.addEventListener("DOMContentLoaded", function () {
                fetch('products.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        searchProducts = data; // Load products into the global array
                    })
                    .catch(error => console.error('Error loading products:', error));
            
                const searchInput = document.getElementById("search-input");
                const suggestions = document.getElementById("suggestions");
                const searchIcon = document.getElementById("search-icon");
            
                // Event listener for input to filter suggestions
                searchInput.addEventListener("input", function () {
                    const query = searchInput.value.toLowerCase();
                    suggestions.innerHTML = ""; // Clear previous suggestions
            
                    if (query) {
                        const matchedProducts = searchProducts.filter(product =>
                            product.name.toLowerCase().includes(query)
                        ).slice(0, 10); // Limit to first 10 matched products
            
                        matchedProducts.forEach((product, index) => {
                            const suggestionHolder = document.createElement("div");
                            suggestionHolder.id = `suggestion-holder`; // Unique ID for each suggestion holder
            
                            const suggestionItem = document.createElement("div");
                            suggestionItem.id = `suggestion-item`; // Unique ID for each suggestion item
            
                            // Create and append the image
                            const suggestionImg = document.createElement("img");
                            suggestionImg.src = product.image; // Assuming product has an 'image' property
                            suggestionImg.alt = product.name; // Set alt text
                            suggestionImg.id = `suggestion-img`; // Unique ID for each image
                            suggestionItem.appendChild(suggestionImg);
            
                            // Create and append the name
                            const suggestionName = document.createElement("h1");
                            suggestionName.textContent = product.name;
                            suggestionName.id = `suggestion-name`; // Unique ID for each name
                            suggestionItem.appendChild(suggestionName);
            
                            // Create and append the price
                            const suggestionPrice = document.createElement("h2");
                            suggestionPrice.textContent = `${product.price}`; // Assuming product has a 'price' property
                            suggestionPrice.id = `suggestion-price`; // Unique ID for each price
                            suggestionItem.appendChild(suggestionPrice);
            
                            // Add click event to redirect
                            suggestionItem.addEventListener("click", () => {
                                const productNameWithHyphens = product.name.replace(/\s+/g, '-'); // Replace spaces with hyphens
                                window.location.href = `/template.html?product=${encodeURIComponent(productNameWithHyphens)}`;
                            });
            
                            suggestionHolder.appendChild(suggestionItem);
                            suggestions.appendChild(suggestionHolder);
                        });
            
                        suggestions.style.display = "block"; // Show suggestions list
                    } else {
                        suggestions.style.display = "none"; // Hide suggestions if no query
                    }
                });
            
                // Hide suggestions when clicking outside the input
                document.addEventListener("click", (event) => {
                    if (!event.target.closest("#search-box")) {
                        suggestions.style.display = "none";
                    }
                });
            
                // Redirect to search results page on clicking search icon
                searchIcon.addEventListener("click", () => {
                    const query = searchInput.value;
                    if (query) {
                        window.location.href = `/template.html?query=${encodeURIComponent(query)}`;
                    }
                });
            });
        </script>
</body>

</html>
